import{c as D,r as n,j as P}from"./index-BDofFu2G.js";import{M as K,i as v,u as W,P as U,a as B,b as F,L as G}from"./proxy-D7N4TsE8.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=D("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);function H(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function T(...e){return r=>{let t=!1;const o=e.map(c=>{const u=H(c,r);return!t&&typeof u=="function"&&(t=!0),u});if(t)return()=>{for(let c=0;c<o.length;c++){const u=o[c];typeof u=="function"?u():H(e[c],null)}}}}function V(...e){return n.useCallback(T(...e),e)}class X extends n.Component{getSnapshotBeforeUpdate(r){const t=this.props.childRef.current;if(t&&r.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const o=t.offsetParent,c=v(o)&&o.offsetWidth||0,u=v(o)&&o.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=c-s.width-s.left,s.bottom=u-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Y({children:e,isPresent:r,anchorX:t,anchorY:o,root:c,pop:u}){var f;const s=n.useId(),x=n.useRef(null),E=n.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:M}=n.useContext(K),l=((f=e.props)==null?void 0:f.ref)??(e==null?void 0:e.ref),g=V(x,l);return n.useInsertionEffect(()=>{const{width:a,height:p,top:C,left:y,right:b,bottom:k}=E.current;if(r||u===!1||!x.current||!a||!p)return;const $=t==="left"?`left: ${y}`:`right: ${b}`,h=o==="bottom"?`bottom: ${k}`:`top: ${C}`;x.current.dataset.motionPopId=s;const m=document.createElement("style");M&&(m.nonce=M);const R=c??document.head;return R.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${p}px !important;
            ${$}px !important;
            ${h}px !important;
          }
        `),()=>{R.contains(m)&&R.removeChild(m)}},[r]),P.jsx(X,{isPresent:r,childRef:x,sizeRef:E,pop:u,children:u===!1?e:n.cloneElement(e,{ref:g})})}const _=({children:e,initial:r,isPresent:t,onExitComplete:o,custom:c,presenceAffectsLayout:u,mode:s,anchorX:x,anchorY:E,root:M})=>{const l=W(q),g=n.useId();let f=!0,a=n.useMemo(()=>(f=!1,{id:g,initial:r,isPresent:t,custom:c,onExitComplete:p=>{l.set(p,!0);for(const C of l.values())if(!C)return;o&&o()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[t,l,o]);return u&&f&&(a={...a}),n.useMemo(()=>{l.forEach((p,C)=>l.set(C,!1))},[t]),n.useEffect(()=>{!t&&!l.size&&o&&o()},[t]),e=P.jsx(Y,{pop:s==="popLayout",isPresent:t,anchorX:x,anchorY:E,root:M,children:e}),P.jsx(U.Provider,{value:a,children:e})};function q(){return new Map}const j=e=>e.key||"";function S(e){const r=[];return n.Children.forEach(e,t=>{n.isValidElement(t)&&r.push(t)}),r}const Q=({children:e,custom:r,initial:t=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:u="sync",propagate:s=!1,anchorX:x="left",anchorY:E="top",root:M})=>{const[l,g]=B(s),f=n.useMemo(()=>S(e),[e]),a=s&&!l?[]:f.map(j),p=n.useRef(!0),C=n.useRef(f),y=W(()=>new Map),b=n.useRef(new Set),[k,$]=n.useState(f),[h,m]=n.useState(f);F(()=>{p.current=!1,C.current=f;for(let d=0;d<h.length;d++){const i=j(h[d]);a.includes(i)?(y.delete(i),b.current.delete(i)):y.get(i)!==!0&&y.set(i,!1)}},[h,a.length,a.join("-")]);const R=[];if(f!==k){let d=[...f];for(let i=0;i<h.length;i++){const w=h[i],z=j(w);a.includes(z)||(d.splice(i,0,w),R.push(w))}return u==="wait"&&R.length&&(d=R),m(S(d)),$(f),null}const{forceRender:L}=n.useContext(G);return P.jsx(P.Fragment,{children:h.map(d=>{const i=j(d),w=s&&!l?!1:f===h||a.includes(i),z=()=>{if(b.current.has(i))return;if(b.current.add(i),y.has(i))y.set(i,!0);else return;let I=!0;y.forEach(A=>{A||(I=!1)}),I&&(L==null||L(),m(C.current),s&&(g==null||g()),o&&o())};return P.jsx(_,{isPresent:w,initial:!p.current||t?void 0:!1,custom:r,presenceAffectsLayout:c,mode:u,root:M,onExitComplete:w?void 0:z,anchorX:x,anchorY:E,children:d},i)})})};export{Q as A,O as M};
